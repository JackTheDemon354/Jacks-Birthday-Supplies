<!DOCTYPE html>
<html>
<head>
  <title>Staff Portal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .message {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      position: relative;
    }
    .delete-btn {
      position: absolute;
      right: 10px;
      top: 10px;
      background-color: red;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
    }
    .signout-btn {
      background-color: gray;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>Staff Portal</h1>
  <button class="signout-btn" onclick="signOut()">Sign Out</button>
  <div id="messages"></div>

  <script>
    if (localStorage.getItem("loggedIn") !== "true") {
      window.location.href = "login.html";
    }

    const messages = JSON.parse(localStorage.getItem("messages") || "[]");
    const messagesDiv = document.getElementById("messages");

    function showMessages() {
      messagesDiv.innerHTML = "";
      messages.forEach((msg, index) => {
        const msgDiv = document.createElement("div");
        msgDiv.className = "message";
        msgDiv.innerHTML = `
          <strong>Name:</strong> ${msg.name}<br>
          <strong>Email:</strong> ${msg.email}<br>
          <strong>Message:</strong> ${msg.message}
          <button class="delete-btn" onclick="deleteMessage(${index})">Delete</button>
        `;
        messagesDiv.appendChild(msgDiv);
      });
    }

    function deleteMessage(index) {
      messages.splice(index, 1);
      localStorage.setItem("messages", JSON.stringify(messages));
      showMessages();
    }

    function signOut() {
      localStorage.removeItem("loggedIn");
      window.location.href = "login.html";
    }

    showMessages();
  </script>
</body>
</html>
